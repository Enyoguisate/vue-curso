{"version":3,"sources":["webpack:///./src/pages/auth/UserAuth.vue?1a9c","webpack:///./src/pages/auth/UserAuth.vue","webpack:///./src/pages/auth/UserAuth.vue?edea"],"names":["for","class","show","error","title","closeErrorDialog","isLoading","fixed","submitForm","formHeader","email","isValid","touched","type","id","value","placeholder","validateForm","emailChanged","password","passwordChanged","isValidForm","link","changeLoginCaption","mode","switchAuthMode","changeSwitchCaption","data","methods","this","login","signup","$store","dispatch","then","redirectUrl","$route","query","redirect","$router","replace","console","log","go","clearFields","setValidForm","setinvalidForm","computed","toUpperCase","render","__scopeId"],"mappings":"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","file":"js/chunk-5d7a0b22.a8014e8d.js","sourcesContent":["export { default } from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./UserAuth.vue?vue&type=style&index=0&id=65474850&scoped=true&lang=css\"; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./UserAuth.vue?vue&type=style&index=0&id=65474850&scoped=true&lang=css\"","<template>\r\n<div>\r\n    <base-dialog :show=\"!!error\" title=\"An Error Ocurred Authenticating\" @close=\"closeErrorDialog\">\r\n        {{ error }}\r\n    </base-dialog>\r\n    <base-dialog :show=\"isLoading\" fixed title=\"Authenticating...\">\r\n        <base-spinner></base-spinner>\r\n    </base-dialog>\r\n    <base-card>\r\n        <form @submit.prevent=\"submitForm\">\r\n            <h1>{{ formHeader }}</h1>\r\n            <div class=\"form-control\" :class=\"{ errors: !email.isValid && email.touched }\">\r\n                <label for=\"email\">Email</label>\r\n                <input type=\"email\" id=\"email\" v-model.trim=\"email.value\" placeholder=\"Enter you email\" @blur=\"validateForm\" @change=\"emailChanged\" />\r\n                <p v-if=\"!email.isValid\">\r\n                    The email field is required and must not be empty\r\n                </p>\r\n            </div>\r\n            <div class=\"form-control\" :class=\"{ errors: !password.isValid && password.touched }\">\r\n                <label for=\"password\">Password</label>\r\n                <input type=\"password\" id=\"password\" v-model.trim=\"password.value\" placeholder=\"Enter your password\" @blur=\"validateForm\" @change=\"passwordChanged\" />\r\n                <p v-if=\"!password.isValid\">\r\n                    The password field is required and must not be empty\r\n                </p>\r\n            </div>\r\n            <div v-if=\"!isValidForm\">\r\n                <p :class=\"{ errors: !isValidForm }\">\r\n                    You must complete both fields to login\r\n                </p>\r\n            </div>\r\n            <div class=\"form-control\">\r\n                <base-button type=\"submit\" :link=\"false\">\r\n                    {{ changeLoginCaption }}\r\n                </base-button>\r\n                <base-button type=\"button\" :link=\"false\" mode=\"outlined\" @click=\"switchAuthMode\">\r\n                    {{ changeSwitchCaption }}\r\n                </base-button>\r\n            </div>\r\n        </form>\r\n    </base-card>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            email: {\r\n                value: '',\r\n                isValid: true,\r\n                touched: false,\r\n            },\r\n            password: {\r\n                value: '',\r\n                isValid: true,\r\n                touched: false,\r\n            },\r\n            isValidForm: true,\r\n            mode: 'login',\r\n            isLoading: false,\r\n            error: null,\r\n        };\r\n    },\r\n    methods: {\r\n        submitForm() {\r\n            if (this.mode === 'login') {\r\n                this.login();\r\n            } else {\r\n                this.signup();\r\n            }\r\n        },\r\n        async login() {\r\n            if (this.email.touched && this.password.touched) {\r\n                this.validateForm();\r\n                if (this.isValidForm) {\r\n                    try {\r\n                        this.isLoading = true;\r\n                        await this.$store\r\n                            .dispatch('login', {\r\n                                email: this.email.value,\r\n                                password: this.password.value,\r\n                            })\r\n                            .then(() => {\r\n                                this.isLoading = false;\r\n                                const redirectUrl =\r\n                                    '/' + (this.$route.query.redirect || 'coaches');\r\n                                this.$router.replace(redirectUrl);\r\n                            });\r\n                    } catch (error) {\r\n                        console.log('error', error);\r\n                        this.error = error || 'Failed to Authenticate, try later.';\r\n                        this.isLoading = false;\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        async signup() {\r\n            if (this.email.touched && this.password.touched) {\r\n                this.validateForm();\r\n                if (this.isValidForm) {\r\n                    try {\r\n                        this.isLoading = true;\r\n                        await this.$store\r\n                            .dispatch('signup', {\r\n                                email: this.email.value,\r\n                                password: this.password.value,\r\n                            })\r\n                            .then(() => {\r\n                                this.isLoading = false;\r\n                                this.$router.go('/auth');\r\n                            });\r\n                    } catch (error) {\r\n                        console.log('error', error);\r\n                        this.error = error || 'Failed to Authenticate, try later.';\r\n                        this.isLoading = false;\r\n                        this.$router.replace('/auth');\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        switchAuthMode() {\r\n            if (this.mode === 'login') {\r\n                this.mode = 'signup';\r\n                this.clearFields();\r\n            } else {\r\n                this.mode = 'login';\r\n                this.clearFields();\r\n            }\r\n        },\r\n        validateForm() {\r\n            this.setValidForm();\r\n            if (this.email.value === '') {\r\n                this.email.isValid = false;\r\n                this.setinvalidForm();\r\n            } else {\r\n                this.email.isValid = true;\r\n            }\r\n            if (this.password.value === '') {\r\n                this.password.isValid = false;\r\n                this.setinvalidForm();\r\n            } else {\r\n                this.password.isValid = true;\r\n            }\r\n        },\r\n        emailChanged() {\r\n            this.email.touched = true;\r\n        },\r\n        passwordChanged() {\r\n            this.password.touched = true;\r\n        },\r\n        setinvalidForm() {\r\n            this.isValidForm = false;\r\n        },\r\n        setValidForm() {\r\n            this.isValidForm = true;\r\n        },\r\n        clearFields() {\r\n            this.email.value = null;\r\n            this.password.value = null;\r\n            this.email.touched = false;\r\n            this.password.touched = false;\r\n        },\r\n        closeErrorDialog() {\r\n            this.error = null;\r\n        },\r\n    },\r\n    computed: {\r\n        formHeader() {\r\n            return this.mode.toUpperCase();\r\n        },\r\n        changeLoginCaption() {\r\n            return this.mode === 'login' ? 'Login' : 'Signup';\r\n        },\r\n        changeSwitchCaption() {\r\n            return this.mode === 'login' ? 'Signup instead' : 'Login';\r\n        },\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import '../../styles/auth.css';\r\n</style>\r\n","import { render } from \"./UserAuth.vue?vue&type=template&id=65474850&scoped=true&bindings={\\\"email\\\":\\\"data\\\",\\\"password\\\":\\\"data\\\",\\\"isValidForm\\\":\\\"data\\\",\\\"mode\\\":\\\"data\\\",\\\"isLoading\\\":\\\"data\\\",\\\"error\\\":\\\"data\\\",\\\"submitForm\\\":\\\"options\\\",\\\"login\\\":\\\"options\\\",\\\"signup\\\":\\\"options\\\",\\\"switchAuthMode\\\":\\\"options\\\",\\\"validateForm\\\":\\\"options\\\",\\\"emailChanged\\\":\\\"options\\\",\\\"passwordChanged\\\":\\\"options\\\",\\\"setinvalidForm\\\":\\\"options\\\",\\\"setValidForm\\\":\\\"options\\\",\\\"clearFields\\\":\\\"options\\\",\\\"closeErrorDialog\\\":\\\"options\\\",\\\"formHeader\\\":\\\"options\\\",\\\"changeLoginCaption\\\":\\\"options\\\",\\\"changeSwitchCaption\\\":\\\"options\\\"}\"\nimport script from \"./UserAuth.vue?vue&type=script&lang=js\"\nexport * from \"./UserAuth.vue?vue&type=script&lang=js\"\n\nimport \"./UserAuth.vue?vue&type=style&index=0&id=65474850&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-65474850\"\n\nexport default script"],"sourceRoot":""}